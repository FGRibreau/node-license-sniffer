#!/usr/bin/env node

var optimist = require("optimist");

var licenseSniffer = require("../");


var argv = optimist.argv;
var modulePath = argv._[0] || ".";

if (argv.recurse) {
    licenseSniffer.sniffRecursive(modulePath, function(err, result) {
        if (err) {
            console.error(err);
        } else {
            console.log(result);
        }
    });
} else {
    licenseSniffer.sniff(modulePath, function(err, license) {
        if (err) {
            console.error(err);
        } else {
            var names = license.names.length ? license.names : ["Unknown license"];
            console.log(names.join(", "));
        }
    });
}
